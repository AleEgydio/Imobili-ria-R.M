import csv

class Imovel:
    def __init__(self, tipo, quartos, vagas, possui_criancas):
        self.tipo = tipo
        self.quartos = quartos
        self.vagas = vagas
        self.possui_criancas = possui_criancas
        self.valor_base = 0
        self.valor_quarto_extra = 0
        self.valor_vaga = 0
        self.desconto = 0
        self.valor_contrato = 2000

    def calcular_aluguel(self):
        if self.tipo == "apartamento":
            self.valor_base = 700
            if self.quartos == 2:
                self.valor_quarto_extra = 200
            if not self.possui_criancas:
                self.desconto = 0.05
            if self.vagas:
                self.valor_vaga = 300

        elif self.tipo == "casa":
            self.valor_base = 900
            if self.quartos == 2:
                self.valor_quarto_extra = 250
            if self.vagas:
                self.valor_vaga = 300

        elif self.tipo == "estudio":
            self.valor_base = 1200
            if self.vagas >= 2:
                self.valor_vaga = 250 + (self.vagas - 2) * 60

        aluguel = self.valor_base + self.valor_quarto_extra + self.valor_vaga
        aluguel -= aluguel * self.desconto
        return aluguel

    def gerar_orcamento(self):
        aluguel = self.calcular_aluguel()
        parcela_contrato = self.valor_contrato / 5
        total_mensal_final = aluguel + parcela_contrato
        return total_mensal_final

    def gerar_csv(self, nome_arquivo="orcamento.csv"):
        valor_mensal = self.gerar_orcamento()
        with open(nome_arquivo, mode="w", newline="") as file:
            writer = csv.writer(file)
            writer.writerow(["Mês", "Valor da Parcela (R$)"])
            for i in range(1, 13):
                writer.writerow([f"{i}º mês", f"{valor_mensal:.2f}"])
        print(f"Arquivo '{nome_arquivo}' gerado com sucesso!")


if __name__ == "__main__":
    print("=== Sistema de Orçamento Imobiliário R.M ===")

    tipo = input("Tipo de imóvel (apartamento/casa/estudio): ").lower()
    quartos = int(input("Quantidade de quartos (1 ou 2): "))
    if tipo == "estudio":
        vagas = int(input("Quantidade de vagas de estacionamento: "))
    else:
        vagas = int(input("Possui garagem? (1 para sim, 0 para não): "))

    possui_criancas = input("Possui crianças? (s/n): ").lower() == "s"

    imovel = Imovel(tipo, quartos, vagas, possui_criancas)
    valor_final = imovel.gerar_orcamento()

    print(f"\nValor do aluguel mensal orçado: R$ {valor_final:.2f}")
    print("Gerando arquivo CSV com as 12 parcelas...")
    imovel.gerar_csv()
